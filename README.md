<div align="center">
  <img align="top" src="https://i.ibb.co/yFrcYkCY/Rasputie.webp" alt="РУССКИЕ ЗЕМЛИ" />
</div>

# РУССКИЕ ЗЕМЛИ
Перед вами проект **многопользовательской текстовой RPG-игры** в виде Telegram бота, разработкой которой я занимался на протяжении полутора лет. В ней игроку предстоит примерить на себя роль богатыря, путешествующего по русским землям, а также одолеть Кощея, Соловья-разбойника, Змея Горыныча и других злодеев.
- На разработку ушло свыше 1000 часов рабочего времени (делал в свободное время, логируя потраченные часы)
- Проект успел побывать в продакшене и пройти "обкатку" на реальных игроках
- За первый день в игре зарегистрировалось свыше 500 игроков 
- Пиковый единовременный онлайн составлял более 200 игроков
- Высокая вовлеченность игроков: Retention первого дня составлял 20%, Retention 30-го дня - 5%
- Проект показал **коммерческий потенциал**: При тестовой закупке рекламы на 15.000 рублей выручка с проекта составила 20.000 рублей

Тем не менее, я не стал развивать проект далее и потерял к нему интерес. Уверен, что при дальнейшей поддержке проекта можно повысить монетизацию и вовлечённость пользователей. 

**Вы можете использовать проект для любых целей, включая коммерческие.**

## Описание

<div align="center">
  <img src="https://i.ibb.co/YB3mnz9P/town-Typical.webp" alt="РУССКИЕ ЗЕМЛИ - Город" width="32%" />
  <img src="https://i.ibb.co/fVj9T1Ln/kikimora.webp" alt="РУССКИЕ ЗЕМЛИ - Кикимора" width="32%" />
  <img src="https://i.postimg.cc/63wZJk3s/rz-battle.webp" alt="РУССКИЕ ЗЕМЛИ - Бой с Кикиморой" width="32%" />
</div>

<div align="center">
  <img src="https://i.ibb.co/cKXbcstL/arena.webp" alt="РУССКИЕ ЗЕМЛИ - Арена" width="32%" />
  <img src="https://i.ibb.co/60114BM8/inventory.webp" alt="РУССКИЕ ЗЕМЛИ - Инвентарь" width="32%" />
  <img src="https://i.ibb.co/m5tJtrjk/offer-Diamonds.webp" alt="РУССКИЕ ЗЕМЛИ - Акция на алмазы" width="32%" />
</div>

### Кратко о том, что есть в игре
- Одиночная сюжетная компания, на прохождение которой уйдут **десятки часов**
- **Пошаговая боевая система** с возможностью использовать разное оружие, свитки и зелья
- Возможность прокачивать своего персонажа, обновлять инвентарь
- Генератор случайных предметов, благодаря которому возникает желание "выбить шмотку получше"
- Игроки могут сражаться с другими игроками на Арене и получать за это награды
- Ежедневно генерируемые противники на уже пройденных локациях не дадут игроку заскучать
- Возможность строить и улучшать различные здания в городе чтобы открыть доступ к новым возможностям
- Внутриигровой магазин с возможностью приобрести товары **за реальные деньги**
- Ежедневные награды за вход в игру
- Реферальная система: игрок получит награды за приглашение новых игроков по своей уникальной ссылке
- Админка на HTTP для управления проектом через браузер

### Данный репозиторий разделён на 3 проекта
- **Сам бот:** серверное приложение на .NET, которое можно запустить на Windows или Linux (папка `MarkOne`)
- **Редактор:** с помощью него можно подкорректировать сложность противников, изменить сюжет и другое (папка `GameDataEditor`)
- **StatViewer:** программа для просмотра статистики (какой % игроков возвращается на следующий день после регистрации, сколько платит и так далее)
 
Как уже сказано выше - всё можно запустить как на `Windows`, так и на `Linux`. При этом `GameDataEditor` и `StatViewer` имеют графическую оболочку (GUI). Она реализована с помощью Avalonia UI с использованием архитектуры MVVM.

## Запуск

Изначально проект не предназначался для публичного доступа, поэтому подробной документации ко всему этому делу нет. Тем не менее, ниже будут изложены основные моменты.

1. Выкачайте репозиторий и соберите проект `MarkOne` (это изначальное техническое название проекта).
2. В папке с собранным проектом в папке `Assets` создайте папку `botData`.
3. В папке `botData` создайте еще одну пустую папку с произвольным именем для вашего окружения (например, `Test`)
4. Запустите проект MarkOne:
- **Windows:** Просто запустите `MarkOne.exe`
- **Linux:** Используйте команду `dotnet MarkOne.dll` (предварительно установив dotnet)
5. Программа загрузит гейм-дату (уровни монстров, сюжет и тд) и выведет на экран список папок из `botData`
6. Введите название ранее созданной папки (например, `Test`).
7. Программа автоматически создаст необходимое содержимое в вашей папке `Test`:
  - **database.sqlite:** в данном файле будет храниться прогресс всех игроков
  - **config.json:** это файл с различными настройками окружения
  - **Statistics:** в эту папку будет собираться статистика об активности игроков (каждый день - новый sqlite файл)
8. Выключите бота с помощью команды `exit`
9. Найдите бота `BotFather` в Telegram. Создайте вашего бота и получите **токен**
10. Откройте config.json и введите ваш токен вместо фразы `ENTER_TOKEN_HERE`. При желании можно сразу поменять параметр `cheatsForAll` на `false`, чтобы игроки без админ-статуса не могли пользоваться читами.
11. Проект готов к запуску. Просто повторите пункты 4-6 чтобы включить бота. Для корректного отключения используйте команду `exit` (чтобы последний прогресс пользователей не был утерян).

### Как выдать себе админку
1. Скачайте из интернета приложение `SQLiteStudio` для работы с базами данных SQLite.
2. Убедитесь, что ваш бот сейчас выключен.
3. В папке `botData/Test` откройте файл `database.sqlite` с помощью `SQLiteStudio`
4. В таблице `Profiles` найдите своего пользователя и поменяйте значение `adminStatus` на `255`
5. Сохраните измененения, нажав на зеленую галочку, и закройте базу данных.
6. Запустите бота.
7. Чтобы открыть окно читов, вместо обычного сообщения боту отправьте ему текст `//`

### О других возможностях:
Рекомендую более внимательно изучить файл config.json

Что точно может заинтересовать:
- Настроив `httpListenerSettings` и поменяв `useWebhook` на `true` вы заставите Telegram присылать апдейты от игроков на ваш сервер. Это рекомендуется для `production` окружения. При этом, стоит запустить приложение на отдельном порту и проксировать на него данные через `nginx`. Без этого - приложение самостоятельно обращается к Telegram за получением апдейтов (подходит для разработки, но это не очень хорошо для продакшена).
- Настройки `paymentsSettings` позволяют подключить платёжный агрегатор LAVA.RU для приёма платежей. Код платёжной системы изначально написан с прицелом на то, что могут появиться другие платёжные агрегаторы. В этом вам предстоит разобраться самостоятельно, если вы захотите подключить приём платежей в ваш проект
- У проекта есть админка на http, к которой можно получить доступ по адресу `http://localhost/admin` (или ваш домен, настроенный в конфиге). Авторизация в админке реализована с помощью Telegram (у пользователя должен быть аккаунт с `adminStatus` более 0).

### Послесловие
Я потратил полтора года жизни на разработку этого проекта (занимался им в свободное время от работы разработчиком игр на Unity). У меня были надежды, что смогу зарабатывать на этом проекте хорошие деньги и уйти с наёмной работы. Один раз у меня уже получилось подобное и 6 лет я был индивидуальным предпринимателем, держа игровой сервер по GTA. И всё же... В итоге я решил, что не хочу повторять этот путь и забросил проект. Вместо этого я решил сфокусироваться на карьере разработчика. Поэтому данный проект теперь украшает моё портфолио.

Так или иначе - данный проект является одной из крутейших вещей, что я делал в жизни.

**Теперь этот проект доступен вам. Модифицируйте и используйте его как пожелаете**.
